define(["jquery"],function(l){var r=/(\s*\S+|\s)$/,a=/^(\S*)/;l.truncate=function(e,t){return l("<div></div>").append(e).truncate(t).html()},l.fn.truncate=function(e){l.isNumeric(e)&&(e={length:e});var s=l.extend({},l.truncate.defaults,e);return this.each(function(){var e=l(this);s.noBreaks&&e.find("br").replaceWith(" ");var t=e.text(),i=t.length-s.length;if(s.stripTags&&e.text(t),s.words&&0<i){var n=t.slice(0,s.length).replace(r,"").length;i=s.keepFirstWord&&0===n?t.length-a.exec(t)[0].length-1:t.length-n-1}i<0||!i&&!s.truncated||l.each(e.contents().get().reverse(),function(e,t){var n=l(t),r=n.text().length;return r<=i?(s.truncated=!0,i-=r,void n.remove()):(3===t.nodeType?s.finishBlock?l(t.splitText(r)).replaceWith(s.ellipsis):l(t.splitText(r-i-1)).replaceWith(s.ellipsis):n.truncate(l.extend(s,{length:r-i})),!1)})})},l.truncate.defaults={stripTags:!1,words:!1,keepFirstWord:!1,noBreaks:!1,finishBlock:!1,length:1/0,ellipsis:"â€¦"}});